<!DOCTYPE html>
<html>
<head>
    <title>Dispatch Center</title>
    <style>
.status-box {
    padding: 10px;
    background-color: #ccc;
    color: black;
    font-weight: bold;
    border: 2px solid black;
    border-radius: 8px;
    width: fit-content;
    margin-bottom: 15px;
}
.blink-red {
    animation: blinkRedBg 1s infinite;
}
@keyframes blinkRedBg {
    0%, 100% { background-color: #ccc; color: black; }
    50% { background-color: red; color: white; }
}
.dark-mode {
    background-color: #1e1e1e;
    color: #f0f0f0;
}
.dark-mode .status-box {
    background-color: #444;
    color: white;
    border-color: #888;
}
    </style>
    
<style>
.dark-mode #postingModal {
    background-color: #444;
    color: #fff;
    border-color: #888;
}
</style>

</head>
<body>

<div style="position: absolute; top: 10px; right: 20px;">
    <a href="#" onclick="toggleDarkMode()">Toggle Dark Mode</a>
</div>

<h1>Dispatch Center</h1>

<div id="statusBox" class="status-box { 'blink-red' if available_trucks <= 3 else '' }">
    System Status Level: {{ available_trucks }} Truck(s) Available
</div>

<p><a href="/availability">Manage Availability</a> | <a href="/admin">Admin Console</a></p>

<!-- INSERT ADDITIONAL CONTENT HERE -->

<!-- Modal for Posting Plan -->
<div id="postingModal" style="display:none; position:fixed; top:20%; left:50%; transform:translateX(-50%);
     background:white; padding:20px; border:2px solid black; border-radius:10px; z-index:1000;">
    <h3>Posting Plan for {{{ available_trucks }}} Truck(s)</h3>
    {% if posting_plan %}
        <ul>
            {% for location in posting_plan %}
                <li>{{ location }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No posting plan defined.</p>
    {% endif %}
    <button onclick="document.getElementById('postingModal').style.display='none'">Close</button>
</div>


<script>
function toggleDarkMode() {
    document.body.classList.toggle("dark-mode");
    localStorage.setItem("darkMode", document.body.classList.contains("dark-mode"));
}

document.addEventListener("DOMContentLoaded", () => {
    if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark-mode");
    }

    const statusBox = document.getElementById("statusBox");
    if (statusBox) {
        statusBox.addEventListener("click", function () {
            document.getElementById("postingModal").style.display = "block";
        });
    }
});
</script>

</body>
</html>
